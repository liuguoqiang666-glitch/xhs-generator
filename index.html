<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„å¸œ-å°çº¢ä¹¦Bç«¯æ’ç‰ˆç¥å™¨ V6.0 (æ•°æ®å¯¼å…¥+è´´çº¸ç³»ç»Ÿ)</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap');

        :root {
            --bg-color: #FDFBF7;
            --text-primary: #2C2C2C;
            --text-secondary: #555555;
            --accent-color: #D4C4B7;
            --highlight: #E65A5A;
            --font-stack: "Alibaba PuHuiTi 2.0", "Alibaba PuHuiTi", "Noto Sans SC", "PingFang SC", sans-serif;
            --title-size: 32px;
            --list-size: 14px;
            --list-gap: 12px;
            --card-padding: 35px;
            --title-align: left; 
        }

        body {
            font-family: var(--font-stack);
            background-color: #eef2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* === æ§åˆ¶é¢æ¿ === */
        .controls {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            width: 100%;
            max-width: 950px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .control-row:last-child { border-bottom: none; padding-bottom: 0; }

        .control-label {
            font-weight: bold;
            font-size: 14px;
            color: #333;
            min-width: 70px;
            display: flex; align-items: center; gap: 5px;
        }

        button {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 14px;
        }
        .btn-primary { background-color: #ff2442; color: white; box-shadow: 0 4px 12px rgba(255, 36, 66, 0.3); }
        .btn-primary:hover { background-color: #e01b36; transform: translateY(-1px); }
        .btn-action { background-color: #f0f0f0; color: #333; }
        .btn-action:hover { background-color: #e0e0e0; }

        select, input[type="text"], textarea {
            padding: 8px 12px; border-radius: 6px; border: 1px solid #ddd; outline: none; font-family: inherit;
        }
        
        .style-selector { display: flex; gap: 10px; flex-wrap: wrap; }
        .style-opt { padding: 6px 12px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; font-size: 13px; background: #fff; }
        .style-opt.active { border-color: #ff2442; color: #ff2442; background: #fff0f2; font-weight: bold; }

        .color-palette { display: flex; gap: 8px; flex-wrap: wrap; }
        .btn-theme { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #ddd; cursor: pointer; transition: transform 0.2s; }
        .btn-theme.active { border-color: #333; transform: scale(1.15); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

        /* === é¢„è§ˆåŒºåŸŸ === */
        .preview-container {
            display: flex; gap: 40px; flex-wrap: wrap; justify-content: center;
        }

        /* === æ ¸å¿ƒå¡ç‰‡æ ·å¼ === */
        .xhs-card {
            width: 450px; height: 600px; /* 3:4 */
            background-color: var(--bg-color);
            padding: var(--card-padding);
            box-sizing: border-box;
            display: flex; flex-direction: column;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            position: relative; overflow: hidden;
            font-family: var(--font-stack);
            transition: all 0.3s ease;
            background-size: cover; background-position: center;
        }

        /* è´´çº¸å…ƒç´ æ ·å¼ */
        .sticker-item {
            position: absolute;
            cursor: move;
            z-index: 100; /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            user-select: none;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
            transition: transform 0.1s;
        }
        .sticker-item:hover { transform: scale(1.05); }
        .sticker-item img { max-width: 100px; max-height: 100px; pointer-events: none; }
        .sticker-text {
            padding: 5px 15px; border: 3px solid currentColor; border-radius: 8px;
            font-weight: 900; font-size: 24px; transform: rotate(-15deg);
            background: rgba(255,255,255,0.8);
            white-space: nowrap; pointer-events: none;
        }

        /* === çº¸å¼ é£æ ¼ CSS å®šä¹‰ (ä¿æŒ V5.2 å…¨éƒ¨é£æ ¼) === */
        /* 0. åŸºç¡€ */
        .paper-lined { background-image: repeating-linear-gradient(transparent, transparent 39px, #d1d1d1 40px); background-size: 100% 40px; background-position: 0 0; background-color: #fff; padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 35px; padding-right: 35px; }
        .paper-lined .card-header { height: 120px; margin-bottom: 0; border-bottom: none; box-sizing: border-box; padding-top: 30px; display: block; }
        .paper-lined .main-title { background: #fff; padding: 5px 10px; border-bottom: 3px solid #333; line-height: 1.2; display: inline-block; }
        .paper-lined .list-item { height: 40px; line-height: 40px !important; align-items: flex-start; margin-bottom: 0 !important; padding-bottom: 0 !important; padding-top: 2px; box-sizing: border-box; }
        .paper-lined .item-info { line-height: 40px !important; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .paper-spiral { background-color: #fcf9f2; padding-left: 60px !important; }
        .paper-spiral::before { content: ''; position: absolute; left: 15px; top: 0; bottom: 0; width: 20px; background-image: radial-gradient(#dccbb6 20%, transparent 25%); background-size: 30px 30px; border-right: 4px double #eee; }
        .paper-spiral::after { content: ''; position: absolute; right: -30px; bottom: 40px; width: 150px; height: 30px; background: rgba(250, 225, 120, 0.8); transform: rotate(-45deg); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .paper-yellow-pad { background-color: #FFD954; padding: 50px 30px 30px 30px !important; }
        .paper-yellow-pad .inner-sheet { background: #fff; width: 100%; height: 100%; border-radius: 10px; padding: 25px; box-sizing: border-box; position: relative; box-shadow: 2px 2px 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .paper-yellow-pad .inner-sheet::before { content: ''; position: absolute; top: -15px; left: 0; right: 0; height: 20px; background-image: radial-gradient(#FFD954 30%, transparent 31%); background-size: 40px 100%; background-repeat: repeat-x; }

        .paper-phone { background-color: #f7f7f7; padding-top: 60px !important; }
        .paper-phone::before { content: 'â€¹ å¤‡å¿˜å½•'; position: absolute; top: 0; left: 0; right: 0; height: 50px; display: flex; align-items: center; padding-left: 20px; color: #ECB318; font-weight: bold; font-size: 16px; background: rgba(255,255,255,0.8); backdrop-filter: blur(5px); border-bottom: 1px solid #e0e0e0; z-index: 10; }
        .paper-phone .card-header { padding-left: 10px; border-bottom: none; }

        /* 1. V4.6 é£æ ¼ */
        .paper-yellow-app { background-color: #FDFCF6; padding-top: 60px !important; }
        .paper-yellow-app::before { content: 'â€¹ SHIYEBIAN'; position: absolute; top: 0; left: 0; right: 0; height: 50px; display: flex; align-items: center; padding-left: 20px; color: #FFB84C; font-weight: bold; font-size: 16px; z-index: 10; }
        .paper-yellow-app::after { content: 'â€¢â€¢â€¢'; position: absolute; top: 12px; right: 20px; color: #FFB84C; font-size: 14px; padding: 2px 8px; border: 1px solid #FFB84C; border-radius: 10px; }
        .paper-yellow-app-footer { position: absolute; bottom: -60px; left: -35px; width: 450px; height: 60px; background: #FDFCF6; border-top: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; }
        .icon-mock { width: 24px; height: 24px; border: 2px solid #FFB84C; border-radius: 4px; }
        .icon-circle { border-radius: 50%; }

        .paper-rounded { background-color: #dcdcdc; padding: 20px !important; }
        .paper-rounded .inner-sheet { background: #fff; width: 100%; height: 100%; border-radius: 25px; padding: 30px; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        .paper-rounded .card-header { border-bottom: none; padding-bottom: 0; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .paper-rounded .main-title { color: #FFA500; font-size: 20px; }
        .paper-rounded .header-icons { display: flex; gap: 10px; }
        .icon-star { color: #ff3b30; font-size: 20px; }
        .icon-bubble { color: #FFA500; font-size: 20px; border: 2px solid #FFA500; border-radius: 4px; width: 18px; height: 18px; }

        .paper-texture { background-color: #f7f7f7; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E"); padding-bottom: 60px !important; }
        .paper-texture .card-header { border-bottom: none; text-align: left !important; padding-top: 10px; display: flex; align-items: center; gap: 10px; }
        .paper-texture .card-header::before { content: 'â€¹'; font-size: 30px; color: #FFB800; font-weight: 300; margin-top: -5px; }
        .paper-texture .main-title { color: #FFB800; font-size: 20px; }
        .paper-texture-footer { position: absolute; bottom: 0; left: 0; width: 100%; height: 50px; background: #e0e0e0; border-top: 1px solid #ccc; display: flex; justify-content: flex-end; align-items: center; gap: 20px; padding-right: 30px; }
        .icon-gray { width: 20px; height: 20px; border: 2px solid #666; border-radius: 4px; }
        .icon-bell { border-radius: 50% 50% 0 0; }

        .paper-minimal { background-color: #fff; padding-top: 60px !important; }
        .paper-minimal::before { content: 'â€¹'; position: absolute; top: 15px; left: 20px; font-size: 30px; color: #FFB800; font-weight: 300; }
        .paper-minimal::after { content: 'â†¶ â†· â†¥ â€¢â€¢â€¢'; position: absolute; top: 22px; right: 20px; font-size: 20px; color: #FFB800; letter-spacing: 15px; font-weight: bold; }
        .paper-minimal .card-header { border-bottom: none; }

        /* 2. V4.9 é£æ ¼ */
        .paper-grid-browser { background-color: #fff; background-image: linear-gradient(#f0f0f0 1px, transparent 1px), linear-gradient(90deg, #f0f0f0 1px, transparent 1px); background-size: 20px 20px; border: 3px solid #000; border-radius: 12px; margin: 10px; height: calc(600px - 20px); width: calc(450px - 20px); padding: 50px 20px !important; }
        .paper-grid-browser::before { content: 'â— â— â—'; position: absolute; top: 15px; left: 25px; font-size: 12px; word-spacing: 5px; color: transparent; text-shadow: 0 0 0 #ff5f57, 15px 0 0 #ffbd2e, 30px 0 0 #28ca41; }
        .paper-grid-browser .card-header { border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
        .paper-grid-browser-footer { position: absolute; bottom: 10px; left: 0; width: 100%; height: 40px; border-top: 2px solid #000; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; font-family: 'Roboto Mono', monospace; font-weight: 700; font-size: 12px; }

        .paper-macos { background-color: #fff; border: 1px solid #d1d1d1; border-radius: 8px; padding-top: 50px !important; margin: 10px; height: calc(600px - 20px); width: calc(450px - 20px); }
        .paper-macos::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 40px; background: linear-gradient(#eee, #ddd); border-bottom: 1px solid #ccc; border-radius: 8px 8px 0 0; z-index: 1; }
        .paper-macos::after { content: ''; position: absolute; top: 12px; left: 15px; width: 10px; height: 10px; border-radius: 50%; background: #ff5f57; box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #28ca41; z-index: 2; }
        .paper-macos-bar { position: absolute; top: 8px; left: 80px; right: 50px; height: 24px; background: #fff; border: 1px solid #ccc; border-radius: 4px; z-index: 2; }

        .paper-date-lined { background-color: #fff; background-image: repeating-linear-gradient(transparent, transparent 39px, #ccc 40px); background-size: 100% 40px; padding-top: 60px !important; }
        .paper-date-lined::before { content: 'Date ___________'; position: absolute; top: 20px; left: 35px; font-family: cursive; font-size: 20px; color: #333; }
        .paper-date-lined .list-item { height: 40px; line-height: 40px !important; align-items: flex-start; margin-bottom: 0 !important; padding-top: 2px; }
        .paper-date-lined .item-info { line-height: 40px !important; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

        .paper-dashed { background-color: #fbfbfb; background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='0' y1='39' x2='100%25' y2='39' stroke='%23cccccc' stroke-width='1' stroke-dasharray='5,5'/%3E%3C/svg%3E"); padding-top: 40px !important; }
        .paper-dashed .list-item { height: 40px; line-height: 40px !important; align-items: flex-start; margin-bottom: 0 !important; padding-top: 2px; }
        .paper-dashed .item-info { line-height: 40px !important; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

        .paper-gold { background-color: #fff; padding-top: 60px !important; padding-bottom: 80px !important; }
        .paper-gold::before { content: 'å¤‡å¿˜å½•'; font-weight: bold; position: absolute; top: 20px; left: 20px; color: #C5A065; font-size: 16px; }
        .paper-gold::after { content: 'ğŸ” + â˜°'; position: absolute; top: 20px; right: 20px; color: #C5A065; font-size: 18px; letter-spacing: 10px; }
        .paper-gold .card-header { border-bottom: none; }
        .paper-gold .main-title { color: #C5A065; }
        .paper-gold-footer { position: absolute; bottom: 20px; right: 20px; width: 100px; height: 60px; display: flex; flex-direction: column; align-items: center; }
        .building-roof { width: 0; height: 0; border-left: 55px solid transparent; border-right: 55px solid transparent; border-bottom: 15px solid #C9B28F; }
        .building-body { width: 100px; height: 40px; background: repeating-linear-gradient(90deg, #C9B28F, #C9B28F 5px, #fff 5px, #fff 10px); border: 2px solid #C9B28F; border-top: none; }

        /* V5.0 æ–°å¢é£æ ¼ */
        .paper-draft-grid { background-color: #fff; background-image: linear-gradient(to right, #ddd 1px, transparent 1px), linear-gradient(to bottom, #ddd 1px, transparent 1px); background-size: 20px 20px; padding-top: 50px !important; padding-bottom: 50px !important; }
        .paper-draft-grid::before { content: ''; position: absolute; top: 35px; left: 30px; right: 30px; height: 2px; background: #888; }
        .paper-draft-grid::after { content: ''; position: absolute; bottom: 35px; left: 30px; right: 30px; height: 2px; background: #888; }
        .paper-draft-grid .card-header { border-bottom: none; }

        .paper-yellow-bar { background-color: #fff; background-image: repeating-linear-gradient(transparent, transparent 39px, #f0f0f0 40px); background-size: 100% 40px; padding-top: 80px !important; }
        .paper-yellow-bar::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 70px; background: #F8D868; z-index: 1; }
        .paper-yellow-bar::after { content: '08:05 ğŸ“¶ ğŸ”‹'; position: absolute; top: 5px; left: 20px; right: 20px; text-align: right; color: #333; font-size: 12px; font-weight: bold; z-index: 2; }
        .paper-yellow-bar .card-header { position: absolute; top: 25px; left: 0; width: 100%; z-index: 3; border: none; padding: 0 20px; box-sizing: border-box; text-align: left; }
        .paper-yellow-bar .main-title { color: #E68A00; background: transparent; padding: 0; border: none; font-size: 24px; }
        .paper-yellow-bar .list-item { height: 40px; line-height: 40px !important; align-items: flex-start; margin-bottom: 0 !important; padding-top: 2px; }
        .paper-yellow-bar .item-info { line-height: 40px !important; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

        .paper-mac-grid { background-color: #fff; border: 1px solid #e0e0e0; border-radius: 10px; padding-top: 50px !important; margin: 10px; height: calc(600px - 20px); width: calc(450px - 20px); background-image: linear-gradient(#f5f5f5 1px, transparent 1px), linear-gradient(90deg, #f5f5f5 1px, transparent 1px); background-size: 20px 20px; background-position: 0 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .paper-mac-grid::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 45px; background: #f0f0f0; border-bottom: 1px solid #ddd; border-radius: 10px 10px 0 0; z-index: 1; }
        .paper-mac-grid::after { content: ''; position: absolute; top: 15px; left: 15px; width: 10px; height: 10px; border-radius: 50%; background: #ff5f57; box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #28ca41; z-index: 2; }
        .mac-grid-tools { position: absolute; top: 12px; left: 90px; z-index: 2; display: flex; gap: 5px; }
        .mac-tool-icon { width: 24px; height: 18px; border: 1px solid #ccc; border-radius: 3px; background: #fff; }

        /* V5.1 ä¿®å¤ */
        .paper-yellow-lite { background-color: #fff; padding-top: 60px !important; }
        .paper-yellow-lite .card-header { border-bottom: none; text-align: left; padding: 0 20px; display: block; }
        .paper-yellow-lite::before { content: 'â€¹ å…¨éƒ¨å¤‡å¿˜å½•'; position: absolute; top: 20px; left: 20px; color: #E6B800; font-size: 18px; font-weight: bold; }
        .paper-yellow-lite::after { content: 'ğŸ“¤ â‹¯'; position: absolute; top: 20px; right: 20px; color: #E6B800; font-size: 20px; letter-spacing: 10px; }
        .paper-yellow-lite .main-title { display: block; margin-top: 10px; margin-bottom: 10px; color: #E6B800; }
        .paper-yellow-lite .card-content { margin-top: 0; }

        .paper-bottom-line { background-color: #fff; padding-top: 60px !important; padding-bottom: 40px !important; }
        .paper-bottom-line::before { content: 'â€¹ å¤‡å¿˜å½•'; position: absolute; top: 20px; left: 20px; color: #FF9933; font-size: 18px; font-weight: bold; }
        .paper-bottom-line::after { content: 'ğŸ“¤ â‹¯'; position: absolute; top: 20px; right: 20px; color: #FF9933; font-size: 20px; letter-spacing: 10px; }
        .paper-bottom-line-footer { position: absolute; bottom: 30px; left: 20px; right: 20px; height: 2px; background: #E0C090; }
        .paper-bottom-line .main-title { display: block; color: #FF9933; margin-bottom: 15px; }


        /* === å…¬å…±éƒ¨åˆ† === */
        .card-header {
            margin-bottom: 15px; padding-bottom: 15px;
            border-bottom: 2px solid var(--accent-color);
            text-align: var(--title-align, left); 
            flex-shrink: 0; z-index: 2;
        }
        .main-title {
            font-weight: 900; color: var(--text-primary); margin: 0; line-height: 1.3;
            font-size: var(--title-size); outline: none; display: inline-block; 
        }

        .card-content { flex: 1; display: flex; flex-direction: column; gap: var(--list-gap); z-index: 2; }

        /* åˆ—è¡¨é¡¹ */
        .list-item {
            display: flex; width: 100%;
            flex-direction: row; align-items: flex-start; justify-content: flex-start; text-align: left;
            font-size: var(--list-size); line-height: 1.6; color: var(--text-primary); outline: none;
        }
        .item-info { flex: 1; text-align: left; }
        
        .item-index { font-weight: 800; color: var(--accent-color); margin-right: 8px; flex-shrink: 0; width: 24px; text-align: center; }
        
        /* é¢œè‰²é€‚é… */
        .paper-phone .item-index, .paper-yellow-app .item-index, .paper-minimal .item-index, .paper-gold .item-index, .paper-yellow-bar .item-index, .paper-yellow-lite .item-index, .paper-bottom-line .item-index { color: #FFB800; }
        .paper-gold .item-index { color: #C5A065; }
        .paper-lined .item-index, .paper-date-lined .item-index, .paper-dashed .item-index, .paper-draft-grid .item-index { color: #aaa; font-style: italic; font-family: 'Georgia', serif; }

        /* ä¿®å¤èƒ¶å›Šåºå·Bugï¼šç§»é™¤å¯¹list-itemçš„å¹²æ‰°ï¼Œåªä½œç”¨äºindex */
        .index-style-badge { 
            background: var(--accent-color); color: #fff; border-radius: 6px; 
            font-size: 12px; width: 20px; height: 20px; line-height: 20px; 
            margin-top: 3px; display: inline-block; 
        }
        .paper-phone .index-style-badge, .paper-yellow-app .index-style-badge, .paper-yellow-bar .index-style-badge { background: #FFB800; }
        .paper-gold .index-style-badge { background: #C5A065; }

        .brand-name { font-weight: 700; color: var(--text-primary); }
        .item-text { color: var(--text-secondary); margin-left: 2px; }

        .my-brand .brand-name { color: var(--highlight); font-weight: 900; }
        .my-brand .item-index { color: var(--highlight); }
        .my-brand.index-style-badge .item-index { background: var(--highlight); color: #fff; }

        .custom-bg-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background-size: cover; background-position: center; z-index: 0; opacity: 1; pointer-events: none; }

    </style>
</head>
<body>

    <div class="controls">
        <div class="control-row" style="background:#f9f9f9; padding:10px; border-radius:8px;">
            <span class="control-label">ğŸ“‹ æ•°æ®å¯¼å…¥:</span>
            <div style="flex:1; display:flex; gap:10px; flex-direction:column;">
                <textarea id="dataInput" placeholder="ç›´æ¥ç²˜è´´æ‚¨çš„åå•ï¼Œæ ¼å¼ï¼šåº—é“ºå æ¡£å£å· æ¨èè¯­ (æ¯è¡Œä¸€æ¡ï¼Œç©ºæ ¼åˆ†éš”)&#10;ä¾‹å¦‚ï¼šéŸ©ç³»é¦† 9æ„æ³•123 çˆ†æ¬¾æ¨è" style="width: 95%; height: 50px; font-size: 12px; border:1px solid #ccc;"></textarea>
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span style="font-size:11px; color:#666;">* ç³»ç»Ÿä¼šè‡ªåŠ¨è§£æå¹¶æ›¿æ¢ä¸‹æ–¹åˆ—è¡¨ï¼ŒåŒæ—¶ä¿ç•™â€œæ„å¸œâ€æ¨å¹¿ä½ã€‚</span>
                    <button class="btn-primary" onclick="importData()">ğŸ“¥ ä¸€é”®ç”Ÿæˆæ’ç‰ˆ</button>
                </div>
            </div>
        </div>

        <div class="control-row">
            <span class="control-label">ğŸ–¼ï¸ è´´çº¸:</span>
            <input type="file" id="logoUpload" accept="image/*" onchange="addLogoSticker(this)" style="display:none;">
            <button class="btn-action" onclick="document.getElementById('logoUpload').click()">â• ä¸Šä¼ Logo</button>
            
            <div style="display:flex; gap:5px; margin-left:10px;">
                <button class="btn-action" onclick="addTextSticker('å¿…é€›', '#ff2442')">ğŸ”´ å¿…é€›</button>
                <button class="btn-action" onclick="addTextSticker('é¿é›·', '#000')">âš« é¿é›·</button>
                <button class="btn-action" onclick="addTextSticker('åº—ä¸»è‡ªç•™', '#E68A00')">ğŸŸ  è‡ªç•™</button>
                <button class="btn-action" onclick="addTextSticker('çˆ†æ¬¾', '#ff5f57')">ğŸ”¥ çˆ†æ¬¾</button>
            </div>
            <span style="font-size:11px; color:#999; margin-left:auto;">(å¯æ‹–æ‹½ç§»åŠ¨ï¼ŒåŒå‡»åˆ é™¤)</span>
        </div>

        <div class="control-row">
            <button class="btn-action" onclick="generateNewData()">ğŸ² éšæœºæ’åº (ä»…å†…ç½®æ•°æ®)</button>
            <button class="btn-action" onclick="downloadImages()">â¬‡ï¸ ä¸‹è½½å›¾ç‰‡</button>
            
            <div style="margin-left:auto; display:flex; gap:10px; align-items:center;">
                <span style="font-size:12px; color:#666;">æ›´æ¢èƒŒæ™¯:</span>
                <input type="file" id="bgUpload" accept="image/*" onchange="handleBgUpload(this)" style="font-size:12px;">
            </div>
        </div>

        <div class="control-row">
            <span class="control-label">ğŸ“ƒ é£æ ¼åº“:</span>
            <div class="style-selector">
                <div class="style-opt active" onclick="setPaperStyle('default', this)">æç®€çº¯è‰²</div>
                <div class="style-opt" onclick="setPaperStyle('lined', this)">ç»å…¸æ¨ªçº¿(15)</div>
                <div class="style-opt" onclick="setPaperStyle('spiral', this)">èºæ—‹çº¿åœˆ</div>
                <div class="style-opt" onclick="setPaperStyle('yellow', this)">é»„è‰²ä¾¿ç­¾</div>
                <div class="style-opt" onclick="setPaperStyle('phone', this)">æ‰‹æœºå¤‡å¿˜</div>
                <div class="style-opt" onclick="setPaperStyle('yellow-app', this)">ğŸŸ¡ ç®€çº¦åº”ç”¨</div>
                <div class="style-opt" onclick="setPaperStyle('rounded', this)">ğŸ–¼ï¸ åœ†è§’å¡ç‰‡</div>
                <div class="style-opt" onclick="setPaperStyle('texture', this)">ğŸ“œ çº¹ç†ä¿¡çº¸</div>
                <div class="style-opt" onclick="setPaperStyle('minimal', this)">âš¡ æç®€å¯¼èˆª</div>
                <div class="style-opt" onclick="setPaperStyle('grid-browser', this)">ğŸŒ ç½‘æ ¼æµè§ˆå™¨</div>
                <div class="style-opt" onclick="setPaperStyle('macos', this)">ğŸ–¥ï¸ MacOSçª—å£</div>
                <div class="style-opt" onclick="setPaperStyle('date-lined', this)">ğŸ“… æ—¥æœŸæ¨ªçº¿</div>
                <div class="style-opt" onclick="setPaperStyle('dashed', this)">âœ‚ï¸ è™šçº¿ä¿¡çº¸</div>
                <div class="style-opt" onclick="setPaperStyle('gold', this)">ğŸ›ï¸ é‡‘è‰²å…¸è—</div>
                <div class="style-opt" onclick="setPaperStyle('draft-grid', this)">ğŸ“ å·¥ç¨‹åˆ¶å›¾</div>
                <div class="style-opt" onclick="setPaperStyle('yellow-bar', this)">ğŸ“’ é»„åº•å¤‡å¿˜</div>
                <div class="style-opt" onclick="setPaperStyle('mac-grid', this)">ğŸ–¥ï¸ Macç½‘æ ¼</div>
                <div class="style-opt" onclick="setPaperStyle('yellow-lite', this)">ğŸŸ¡ æç®€é»„å­—</div>
                <div class="style-opt" onclick="setPaperStyle('bottom-line', this)">â– åº•éƒ¨çº¿æ¡†</div>
            </div>
        </div>

        <div class="control-row">
            <span class="control-label">ğŸ”¢ åºå·:</span>
            <select id="indexStyleSelect" onchange="renderCurrentData()">
                <option value="circle">ç©ºå¿ƒåœ† (â‘ )</option>
                <option value="solid">å®å¿ƒé»‘ (â¶)</option>
                <option value="pad">è¡¥é›¶ (01)</option>
                <option value="badge">èƒ¶å›Š (â– )</option>
                <option value="dot">ç®€çº¦ (1.)</option>
            </select>

            <span class="control-label" style="margin-left:15px">Aa å­—ä½“:</span>
            <select onchange="updateFont(this.value)">
                <option value='"Alibaba PuHuiTi 2.0", "Alibaba PuHuiTi", "Noto Sans SC", sans-serif'>é˜¿é‡Œå·´å·´æ™®æƒ ä½“</option>
                <option value='"PingFang SC", "Microsoft YaHei", sans-serif'>ç³»ç»Ÿé»‘ä½“</option>
                <option value='"Songti SC", "SimSun", serif'>æ–‡è‰ºå®‹ä½“</option>
                <option value='"Kaiti SC", "KaiTi", serif'>æ‰‹å†™æ¥·ä½“</option>
            </select>
        </div>

        <div class="control-row">
            <span class="control-label">ğŸ“ æ ‡é¢˜:</span>
            <div style="display:flex; gap:5px; margin-right:15px;">
                <button class="btn-action" onclick="setAlignment('left')" title="æ ‡é¢˜å·¦å¯¹é½">â¬…ï¸</button>
                <button class="btn-action" onclick="setAlignment('center')" title="æ ‡é¢˜å±…ä¸­">â¬‡ï¸</button>
                <button class="btn-action" onclick="setAlignment('right')" title="æ ‡é¢˜å³å¯¹é½">â¡ï¸</button>
            </div>

            <input type="text" id="titleInput" value="å››å­£é’çƒ­é—¨å¤§ç æ¡£å£åˆ†äº«" oninput="syncTitle()" style="width:160px;" placeholder="è¾“å…¥æ ‡é¢˜">
            <label style="font-size:12px;"><input type="checkbox" id="breakTitleCheck" onchange="syncTitle()" checked> æ¢è¡Œ</label>
            
            <span style="font-size:12px; margin-left:10px; color:#666;">æ ‡é¢˜å­—å·:</span>
            <input type="range" min="20" max="60" value="32" oninput="updateCSSVar('--title-size', this.value + 'px')">
            
            <span class="control-label" style="margin-left:15px">ğŸ“‘ æ­£æ–‡:</span>
            <span style="font-size:12px; margin-left:5px; color:#666;">å­—å·:</span>
            <input type="range" min="12" max="18" value="14" oninput="updateCSSVar('--list-size', this.value + 'px')">
            <span style="font-size:12px; margin-left:5px; color:#666;">è¡Œè·:</span>
            <input type="range" min="8" max="40" value="12" id="gapSlider" oninput="updateCSSVar('--list-gap', this.value + 'px')">
        </div>

        <div class="control-row" id="colorRow">
            <span class="control-label">ğŸ¨ é…è‰²:</span>
            <div class="color-palette">
                <button class="btn-theme active" style="background:#FDFBF7;" onclick="setTheme(0)"></button>
                <button class="btn-theme" style="background:#F0F4F8;" onclick="setTheme(1)"></button>
                <button class="btn-theme" style="background:#F1F5EB;" onclick="setTheme(2)"></button>
                <button class="btn-theme" style="background:#F6F0F8;" onclick="setTheme(3)"></button>
                <button class="btn-theme" style="background:#FFFFFF;" onclick="setTheme(4)"></button>
                <button class="btn-theme" style="background:#333; border-color:#555;" onclick="setTheme(5)"></button>
            </div>
        </div>
    </div>

    <div class="preview-container">
        <div class="xhs-card" id="card1">
            <div class="custom-bg-overlay"></div> 
            <div class="inner-sheet-wrapper"> 
                <div class="paper-macos-bar" style="display:none;"></div>
                <div class="mac-grid-tools" style="display:none;"><div class="mac-tool-icon"></div><div class="mac-tool-icon"></div></div>
                <div class="card-header">
                    <h1 class="main-title" contenteditable="true">å››å­£é’çƒ­é—¨<br>å¤§ç æ¡£å£åˆ†äº«</h1>
                    <div class="header-icons" style="display:none;">
                        <span class="icon-star">â˜…</span> <span class="icon-bubble"></span>
                    </div>
                </div>
                <div class="card-content" id="list1"></div>
                <div class="paper-yellow-app-footer" style="display:none;">
                    <div class="icon-mock"></div> <div class="icon-mock icon-circle"></div> <div class="icon-mock"></div> <div class="icon-mock"></div>
                </div>
                <div class="paper-texture-footer" style="display:none;">
                    <div class="icon-gray icon-bell"></div> <div class="icon-gray"></div> <div class="icon-gray"></div>
                </div>
                <div class="paper-grid-browser-footer" style="display:none;"><span>BIAOTI</span> <span>MOBAN</span></div>
                <div class="paper-gold-footer" style="display:none;"><div class="building-roof"></div><div class="building-body"></div></div>
                <div class="paper-bottom-line-footer" style="display:none;"></div>
            </div>
        </div>
        
        <div class="xhs-card" id="card2">
            <div class="custom-bg-overlay"></div>
            <div class="inner-sheet-wrapper">
                <div class="paper-macos-bar" style="display:none;"></div>
                <div class="mac-grid-tools" style="display:none;"><div class="mac-tool-icon"></div><div class="mac-tool-icon"></div></div>
                <div class="card-header">
                    <h1 class="main-title" contenteditable="true">å››å­£é’çƒ­é—¨<br>å¤§ç æ¡£å£åˆ†äº«</h1>
                    <div class="header-icons" style="display:none;">
                        <span class="icon-star">â˜…</span> <span class="icon-bubble"></span>
                    </div>
                </div>
                <div class="card-content" id="list2"></div>
                <div class="paper-yellow-app-footer" style="display:none;">
                    <div class="icon-mock"></div> <div class="icon-mock icon-circle"></div> <div class="icon-mock"></div> <div class="icon-mock"></div>
                </div>
                <div class="paper-texture-footer" style="display:none;">
                    <div class="icon-gray icon-bell"></div> <div class="icon-gray"></div> <div class="icon-gray"></div>
                </div>
                <div class="paper-grid-browser-footer" style="display:none;"><span>BIAOTI</span> <span>MOBAN</span></div>
                <div class="paper-gold-footer" style="display:none;"><div class="building-roof"></div><div class="building-body"></div></div>
                <div class="paper-bottom-line-footer" style="display:none;"></div>
            </div>
        </div>
    </div>

<script>
    // === V5.2 æ ¸å¿ƒæ¨å¹¿æ–‡æ¡ˆåº“ ===
    const myBrandInfo = {
        name: "æ„å¸œ", loc: "9æ„æ³•5182",
        descs: ["æ‹’ç»å¸‚åœºé€šè´§ï¼ŒåŸåˆ›è®¾è®¡ä¸æ’æ¬¾åŠ›æ¨ï¼", "ç‹¬å®¶å¼€ç‰ˆå®šæŸ“ï¼Œå¸‚é¢ç¨€ç¼ºå¥½è´§å¼ºæ¨ï¼", "é£æ ¼å·®å¼‚åŒ–ï¼Œè½»æ¾ç•™ä½è€å®¢æˆ·å¿…é€›ï¼", "å“è´¨å¥½å¼ºæ¨ï¼åŸåˆ›è®¾è®¡ä¸æ’æ¬¾åŠ›æ¨ï¼", "å®ä½“åº—éƒ½åœ¨æ‹¿ï¼Œé”™è¿‡æ‹å¤§è…¿å¼ºæ¨ï¼", "é—­çœ¼æ‹¿ä¸è¸©é›·ï¼Œè€å®¢å›å¤´ç‡é«˜å¿…é€›ï¼", "æ‹¿å›å»æ²¡å¯¹æ‰‹ï¼Œæ•´æ¡è¡—ç‹¬ä¸€ä»½åŠ›æ¨ï¼", "å‘Šåˆ«åœŸå‘³å¤§ç ï¼ŒåŸåˆ›è®¾è®¡ä¸æ’æ¬¾å¼ºæ¨ï¼", "ç‹¬å®¶åŸåˆ›è®¾è®¡ï¼Œæ•´æ¡è¡—éƒ½ä¸æ’æ¬¾å¿…é€›ï¼", "è¿™ç§è°ƒæ€§å¤§ç ï¼Œåˆ«å®¶çœŸæ²¡æœ‰åŠ›æ¨ï¼", "å¿…æ‹¿æ¡£å£ï¼å“è´¨ç‰ˆå‹éƒ½å¾ˆç»ï¼å¼ºæ¨ï¼"]
    };

    // é»˜è®¤å†…ç½®æ•°æ® (ç«äº‰å¯¹æ‰‹æ± )
    let otherBrandsData = [
        {name: "h.h", loc: "9æ„æ³•1281", desc: "éŸ©ç³»å°æ¸…æ–°é£æ ¼ï¼Œå¾ˆå‡é¾„"}, {name: "æ…§èŠ", loc: "9æ„æ³•5123", desc: "ç”œé…·å°‘å¥³é£ï¼Œèƒ–mmå‡¸æ˜¾æ›²çº¿ç¾"}, {name: "sto", loc: "9æ„æ³•2169", desc: "æ—¥å¸¸é€šå‹¤é£ï¼Œç®€çº¦ä¸æŒ‘äºº"}, {name: "è‰¾è´æ¢µ", loc: "9æ„æ³•5136", desc: "æ–°ä¸­å¼é£æ ¼ï¼Œæ¸©å©‰å¤§æ°”"}, {name: "3apple", loc: "9æ„æ³•5103", desc: "åŸºç¡€æ—¥å¸¸æ¬¾å¤šï¼Œåˆ©ç”¨ç‡é«˜"}, {name: "tmi", loc: "9æ„æ³•5157", desc: "éŸ©ç³»ç”œç¾ï¼Œæ¸©æŸ”æ¸…æ–°ç”°å›­é£"}, {name: "FAFA", loc: "9æ„æ³•5160", desc: "æ°”è´¨éŸ©ç³»ï¼Œç”œç¾ä¸ä¼‘é—²æ½®é…·å…¼å¤‡"}, {name: "æ²¹èœ", loc: "9æ„æ³•5179", desc: "éŸ©ç³»ç”œç¾ç”°å›­é£ï¼Œä¸»æ‰“è¿è¡£è£™"}, {name: "PPGL", loc: "9æ„æ³•5191", desc: "ä¸“ä¸šå¤§ç å¥³è£…è£¤"}, {name: "WOOWD", loc: "9æ„æ³•5155", desc: "éŸ©ç³»å¤§ç åŸåˆ›é£ï¼Œç”œç¾å¤å¤"}, {name: "é’å­œ", loc: "9æ„æ³•5150", desc: "å®ç©¿ä¸æ—¶å°šå…¼å¤‡ï¼Œå…¨å“ç±»ç®€çº¦"}, {name: "fbyk", loc: "9æ„æ³•5151", desc: "ä¸»æ‰“é˜²æ™’æœå’Œå¥—è£…"}, {name: "six", loc: "9æ„æ³•5128", desc: "æ£‰éº»äºšéº»å°è¡«ï¼Œä¼‘é—²æ˜¾ç˜¦"}, {name: "ç™¾å®¶æ¬¢", loc: "9æ„æ³•5126", desc: "ä¸­é«˜ç«¯å¤§ç ï¼ŒåŒ…å®¹æ€§å¼º"}, {name: "ä¹ƒç²’", loc: "9æ„æ³•5176", desc: "é€šå‹¤é£ï¼Œé’ˆç»‡ç±»æ¡£å£"}, {name: "æ²«æ£®å›¾", loc: "9æ„æ³•2169", desc: "ç®€çº¦éŸ©ç³»é€šå‹¤ï¼Œç©¿æ­é£"}, {name: "æ€ªæ€ªæ ‘", loc: "9æ„æ³•3215", desc: "æ¬§éŸ©å¤§ç‰ˆä¼‘é—²é£ï¼Œå­•å¦ˆå¯ç©¿"}, {name: "YOLI", loc: "9æ„æ³•4279", desc: "é˜²æ™’è¡«æ˜¯å¿…æ‹¿æ¬¾"}, {name: "OUKA", loc: "9æ„æ³•4255", desc: "ä¸»æ‰“Tæ¤åŠé˜²æ™’è¡¬è¡«"}, {name: "è‘£ä¸é™ˆ", loc: "æ„æ³•4080", desc: "å¤§ç è¿è¡£è£™ä¸“è¥"}, {name: "ç‰›ç‰›", loc: "æ¸…æ±Ÿ2012", desc: "æ—¥ç³»å¤§ç ï¼Œå“ç±»å¤š"}, {name: "è¯‘å¤–", loc: "æ¸…æ±Ÿ1067", desc: "æ£‰éº»æ°‘æ—é£ã€å›½é£"}, {name: "ç†Šå§‘å¨˜", loc: "æ¸…æ±Ÿ", desc: "ç”œç¾æ£®ç³»ï¼Œå¯å¯çˆ±çˆ±"}, {name: "è¿·å¦®", loc: "æ¸…æ±Ÿ2æ¥¼", desc: "å¤å¤ä¼‘é—²æ£‰éº»ï¼Œèˆ’é€‚"}, {name: "ç–¯å­", loc: "æ¸…æ±Ÿ1008", desc: "æ–‡è‰ºå¤§å¦ˆä¸­æ€§è°ƒ"}, {name: "å¸ƒå£¹è´°", loc: "æ¸…æ±Ÿ3039", desc: "å¤å¤åšæ—§æ£‰éº»ï¼Œæœ‰è´¨æ„Ÿ"}, {name: "ç’ç”°å¤•", loc: "æ¸…æ±Ÿ3001", desc: "æ°‘æ—é£ï¼Œè‹éº»æ£‰éº»"}, {name: "è¾¾ä»¤", loc: "ç¯åŒ—2æ¥¼", desc: "æ—¥éŸ©ä¼‘é—²é£ï¼Œå¥½ç©¿"}, {name: "çŸ³ä¹", loc: "ä¸œå¤§æ¥¼2æ¥¼", desc: "æ€§å†·æ·¡æ—¥ç³»åŸåˆ›ä¼‘é—²"}, {name: "zaozao", loc: "ä¸­æ˜Ÿa6", desc: "åŸåˆ›æ—¥ç³»ï¼Œæœ‰æ ¼è°ƒæ¾å¼›é£"}, {name: "å°æ£®æ—", loc: "å¸¸é’2æ¥¼", desc: "ç”œç¾å°‘å¥³é£æ ¼"}, {name: "å°å§å¦¹", loc: "å¸¸é’2æ¥¼", desc: "æ–‡è‰ºå°æ¸…æ–°"}, {name: "å°æ—¥å­", loc: "ä¸­æ˜Ÿ2036", desc: "éŸ©ç³»ä¼‘é—²ï¼Œæ—¥å¸¸"}, {name: "éŸ©å›½é¦†", loc: "ç¯åŒ—2185", desc: "äº®è‰²å¤å¤é£ï¼Œå–„ç”¨å¤§æ’è‰²"}, {name: "æœ¬æº", loc: "æ–°æ­æ´¾160", desc: "æ—¥ç³»ä¼‘é—²é£ï¼Œæ–‡è‰ºå¤å¤"}, {name: "é˜¿åŒ—", loc: "ä¸­æ˜Ÿb150", desc: "å¤å¤æ£®ç³»ï¼Œæ°›å›´æ„Ÿ"}, {name: "Miao", loc: "æ–°æ­æ´¾B333", desc: "è€é’±é£æç®€é£å¤§ç "}, {name: "wive", loc: "9æ„æ³•5098", desc: "å¤§ç å¥³å­©çš„æç®€è€é’±é£"}, {name: "è±Œè±†å®¶", loc: "9ä¸­æ˜Ÿ036", desc: "éŸ©ä¼‘é—²æ¾å¼›æ…µæ‡’é£"}, {name: "n.ge", loc: "è€æ„æ³•2275", desc: "æ—¥ç³»æ£‰éº»æ£®ç³»å¤§ç "}, {name: "SEVENTEEN", loc: "9æ„æ³•2169", desc: "æç®€è½»å¥¢ï¼ŒèŠéº»ç±»"}, {name: "è‰å ‚", loc: "9æ„æ³•5196", desc: "æ£®ç³»æ£‰éº»å¤å¤ç±»å¤§ç "}, {name: "RRZBB", loc: "9æ–°æ„æ³•345", desc: "æ—¥ç³»å¤å¤å±±ç³»èˆ’é€‚é£"}, {name: "buer", loc: "9å¸¸é’6007", desc: "æç®€åŸåˆ›è®¾è®¡ï¼Œæ½®æµå¤§ç "}
    ];

    let currentPage1Data = [], currentPage2Data = [];
    const indexMaps = {
        circle: ['â‘ ','â‘¡','â‘¢','â‘£','â‘¤','â‘¥','â‘¦','â‘§','â‘¨','â‘©','â‘ª','â‘«','â‘¬','â‘­','â‘®','â‘¯','â‘°','â‘²','â‘²','â‘³','ã‰‘','ã‰’','ã‰“','ã‰”'],
        solid: ['â¶','â·','â¸','â¹','âº','â»','â¼','â½','â¾','â¿','â“«','â“¬','â“­','â“®','â“¯','â“°','â“±','â“²','â“³','â“´','ã‰‘','ã‰’','ã‰“','ã‰”']
    };

    // === V6.0 æ–°å¢: æ•°æ®è§£æä¸å¯¼å…¥ ===
    function importData() {
        const input = document.getElementById('dataInput').value.trim();
        if(!input) { alert("è¯·å…ˆç²˜è´´æ•°æ®ï¼"); return; }
        
        const lines = input.split('\n');
        const newData = [];
        
        lines.forEach(line => {
            // ç®€å•çš„ç©ºæ ¼åˆ†å‰²é€»è¾‘ï¼Œé€‚åº”å¤åˆ¶ç²˜è´´æ ¼å¼
            const parts = line.trim().split(/\s+/); 
            if(parts.length >= 1) {
                const name = parts[0];
                const loc = parts[1] || "";
                // å‰©ä½™éƒ¨åˆ†éƒ½ç®—ä½œæ¨èè¯­
                const desc = parts.slice(2).join(" ") || "æš‚æ— æè¿°";
                newData.push({name, loc, desc});
            }
        });

        if(newData.length > 0) {
            // æ›¿æ¢å†…ç½®æ•°æ®æ± 
            otherBrandsData = newData;
            alert(`æˆåŠŸå¯¼å…¥ ${newData.length} æ¡æ•°æ®ï¼`);
            generateNewData(); // é‡æ–°ç”Ÿæˆï¼Œä¾ç„¶ä¼šæ··å…¥â€œæ„å¸œâ€
        } else {
            alert("è§£æå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ ¼å¼");
        }
    }

    // === V6.0 æ–°å¢: è´´çº¸ç³»ç»Ÿ ===
    function makeDraggable(el) {
        let isDragging = false;
        let startX, startY, initialLeft, initialTop;

        el.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            initialLeft = el.offsetLeft;
            initialTop = el.offsetTop;
            el.style.cursor = 'grabbing';
        });

        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                el.style.left = `${initialLeft + dx}px`;
                el.style.top = `${initialTop + dy}px`;
            }
        });

        window.addEventListener('mouseup', () => {
            isDragging = false;
            el.style.cursor = 'move';
        });
        
        // åŒå‡»åˆ é™¤
        el.addEventListener('dblclick', () => {
            el.remove();
        });
    }

    function addLogoSticker(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                createSticker(e.target.result, 'image');
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    function addTextSticker(text, color) {
        createSticker(text, 'text', color);
    }

    function createSticker(content, type, color) {
        document.querySelectorAll('.xhs-card').forEach(card => {
            const sticker = document.createElement('div');
            sticker.className = 'sticker-item';
            sticker.style.left = '50px'; // é»˜è®¤åˆå§‹ä½ç½®
            sticker.style.top = '100px';
            
            if(type === 'image') {
                sticker.innerHTML = `<img src="${content}" alt="logo">`;
            } else {
                sticker.innerHTML = `<div class="sticker-text" style="color:${color}; border-color:${color}">${content}</div>`;
            }
            
            card.appendChild(sticker);
            makeDraggable(sticker);
        });
    }

    // === æ ¸å¿ƒé€»è¾‘ ===
    function shuffle(arr) {
        let a = [...arr];
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }

    function generateNewData() {
        const rand = Math.random();
        let myPosIndex = 0; 
        if (rand >= 0.6 && rand < 0.8) myPosIndex = 1; 
        else if (rand >= 0.8) myPosIndex = 2; 

        const myBrandDesc = myBrandInfo.descs[Math.floor(Math.random() * myBrandInfo.descs.length)];
        const myBrandObj = { name: myBrandInfo.name, loc: myBrandInfo.loc, desc: myBrandDesc, isMine: true };

        // å¦‚æœç”¨æˆ·å¯¼å…¥æ•°æ®å¾ˆå°‘ï¼Œä¹Ÿè¦èƒ½æ˜¾ç¤º
        let competitors = shuffle(otherBrandsData);
        if(competitors.length > 23) competitors = competitors.slice(0, 23); // æˆªå–å‰23ä¸ª(ç•™ç»™ç§è´§)
        
        let p1Count = Math.min(11, Math.ceil(competitors.length / 2));
        let p1 = competitors.slice(0, p1Count);
        
        // æ’å…¥ç§è´§
        if(p1.length >= myPosIndex) {
             p1.splice(myPosIndex, 0, myBrandObj);
        } else {
             p1.push(myBrandObj);
        }
        
        currentPage1Data = p1;
        currentPage2Data = competitors.slice(p1Count);

        renderCurrentData();
    }

    function getIndexHTML(index, style) {
        const realIndex = index + 1;
        let content = `${realIndex}.`;
        if (style === 'circle') content = indexMaps.circle[index] || realIndex;
        else if (style === 'solid') content = indexMaps.solid[index] || realIndex;
        else if (style === 'pad') content = realIndex < 10 ? `0${realIndex}` : realIndex;
        else if (style === 'badge') content = realIndex;
        return `<span class="item-index index-style-${style}">${content}</span>`;
    }

    function renderCurrentData() {
        const style = document.getElementById('indexStyleSelect').value;
        renderList(document.getElementById('list1'), currentPage1Data, 0, style);
        // å¦‚æœç¬¬äºŒé¡µæ²¡æ•°æ®ï¼Œæ¸…ç©º
        if(currentPage2Data.length > 0) {
            renderList(document.getElementById('list2'), currentPage2Data, currentPage1Data.length, style);
        } else {
            document.getElementById('list2').innerHTML = '';
        }
        syncTitle();
    }

    function renderList(container, data, startIndexOffset, style) {
        container.innerHTML = '';
        data.forEach((item, index) => {
            const globalIndex = startIndexOffset + index;
            const div = document.createElement('div');
            // ä¿®å¤èƒ¶å›Šåºå·Bugï¼šlist-itemä¸Šä¸åŠ index-style-badge
            div.className = `list-item ${item.isMine ? 'my-brand' : ''}`;
            div.contentEditable = "true";
            div.innerHTML = `
                ${getIndexHTML(globalIndex, style)}
                <div class="item-info">
                    <span class="brand-name">${item.name}ğŸ“ï¼ˆ${item.loc}ï¼‰</span>
                    <span class="item-text">${item.desc}</span>
                </div>
            `;
            container.appendChild(div);
        });
    }

    function setAlignment(type) {
        const root = document.documentElement;
        if (type === 'left') root.style.setProperty('--title-align', 'left');
        else if (type === 'center') root.style.setProperty('--title-align', 'center');
        else if (type === 'right') root.style.setProperty('--title-align', 'right');
    }

    function setPaperStyle(styleName, btn) {
        document.querySelectorAll('.style-opt').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const cards = document.querySelectorAll('.xhs-card');
        const wrappers = document.querySelectorAll('.inner-sheet-wrapper');

        cards.forEach((card, idx) => {
            card.className = `xhs-card paper-${styleName}`;
            
            if(styleName === 'yellow' || styleName === 'rounded') {
                wrappers[idx].className = 'inner-sheet-wrapper inner-sheet';
            } else {
                wrappers[idx].className = 'inner-sheet-wrapper';
            }

            // æ§åˆ¶ç‰¹æ®Šå›¾æ ‡æ˜¾ç¤º
            const footer1 = card.querySelector('.paper-yellow-app-footer');
            const footer2 = card.querySelector('.paper-texture-footer');
            const footer3 = card.querySelector('.paper-grid-browser-footer');
            const footer4 = card.querySelector('.paper-gold-footer');
            const footer5 = card.querySelector('.paper-bottom-line-footer');
            const headerIcons = card.querySelector('.header-icons');
            const macBar = card.querySelector('.paper-macos-bar');
            const macTools = card.querySelector('.mac-grid-tools');
            
            if(footer1) footer1.style.display = (styleName === 'yellow-app') ? 'flex' : 'none';
            if(footer2) footer2.style.display = (styleName === 'texture') ? 'flex' : 'none';
            if(footer3) footer3.style.display = (styleName === 'grid-browser') ? 'flex' : 'none';
            if(footer4) footer4.style.display = (styleName === 'gold') ? 'flex' : 'none';
            if(footer5) footer5.style.display = (styleName === 'bottom-line') ? 'block' : 'none';
            
            if(headerIcons) headerIcons.style.display = (styleName === 'rounded') ? 'flex' : 'none';
            if(macBar) macBar.style.display = (styleName === 'macos') ? 'block' : 'none';
            if(macTools) macTools.style.display = (styleName === 'mac-grid') ? 'flex' : 'none';
        });

        // é”å®šè¡Œé«˜é€»è¾‘
        const gapSlider = document.getElementById('gapSlider');
        if(['lined', 'date-lined', 'dashed', 'draft-grid', 'yellow-bar', 'mac-grid'].includes(styleName)) {
            gapSlider.disabled = true;
            gapSlider.title = "æ­¤æ¨¡å¼ä¸‹è¡Œè·å›ºå®šä»¥å¯¹é½ç½‘æ ¼";
            updateCSSVar('--list-gap', '0px');
            updateCSSVar('--list-size', '16px');
        } else {
            gapSlider.disabled = false;
            gapSlider.title = "";
            gapSlider.value = 12;
            updateCSSVar('--list-gap', '12px');
            updateCSSVar('--list-size', '14px');
        }
    }

    function handleBgUpload(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.querySelectorAll('.custom-bg-overlay').forEach(el => {
                    el.style.backgroundImage = `url(${e.target.result})`;
                    el.style.opacity = 1;
                });
                setPaperStyle('default', document.querySelector('.style-opt'));
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    const themes = [
        { bg: '#FDFBF7', text1: '#4A403A', text2: '#8C8279', accent: '#D4C4B7', hl: '#E65A5A' },
        { bg: '#F0F4F8', text1: '#3D4C53', text2: '#788995', accent: '#B8C6D1', hl: '#5D7C8F' },
        { bg: '#F1F5EB', text1: '#3A4A3A', text2: '#758575', accent: '#B7C4B7', hl: '#6B8E23' },
        { bg: '#F6F0F8', text1: '#4A3A4A', text2: '#857585', accent: '#CDB7CD', hl: '#9370DB' },
        { bg: '#FFFFFF', text1: '#111111', text2: '#666666', accent: '#DDDDDD', hl: '#000000' },
        { bg: '#333333', text1: '#FFFFFF', text2: '#BBBBBB', accent: '#555555', hl: '#FFD700' } 
    ];

    function setTheme(index) {
        const t = themes[index];
        const root = document.documentElement;
        root.style.setProperty('--bg-color', t.bg);
        root.style.setProperty('--text-primary', t.text1);
        root.style.setProperty('--text-secondary', t.text2);
        root.style.setProperty('--accent-color', t.accent);
        root.style.setProperty('--highlight', t.hl);
        document.querySelectorAll('.custom-bg-overlay').forEach(el => el.style.opacity = 0);
        document.getElementById('bgUpload').value = '';
        document.querySelectorAll('.btn-theme').forEach((btn, i) => btn.classList.toggle('active', i === index));
    }

    function updateCSSVar(v, val) { document.documentElement.style.setProperty(v, val); }
    function updateFont(f) { updateCSSVar('--font-stack', f); }

    function syncTitle() {
        const txt = document.getElementById('titleInput').value;
        const br = document.getElementById('breakTitleCheck').checked;
        document.querySelectorAll('.main-title').forEach(el => {
            if(br && txt.length > 5) {
                const mid = Math.ceil(txt.length/2);
                el.innerHTML = txt.slice(0,mid) + '<br>' + txt.slice(mid);
            } else { el.innerText = txt; }
        });
    }

    function downloadImages() {
        ['card1', 'card2'].forEach((id, i) => {
            html2canvas(document.getElementById(id), { scale:2, useCORS:true, backgroundColor:null }).then(cvs => {
                const a = document.createElement('a');
                a.download = `æ„å¸œ_å¤§ç æ¡£å£_${i+1}.png`;
                a.href = cvs.toDataURL();
                a.click();
            });
        });
    }

    window.onload = function() { generateNewData(); };
</script>
</body>
</html>
