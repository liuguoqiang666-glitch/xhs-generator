<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>L-YIEZHII-小红书内部排版神器V9.3</title>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<link rel="stylesheet" href="styles.css">

</head>
<body>
<div id="login-overlay">
<div class="login-box">
<img class="login-logo" onerror="this.style.display='none'" src="logo.png"/>
<div class="login-title">YIEZHII内部通用版</div>
<input class="login-input" id="tokenInput" placeholder="输入密钥解锁" type="password"/>
<br/>
<button class="login-btn" onclick="checkToken()">进入系统</button>
</div>
</div>
<div class="brand-watermark">
<img class="wm-logo" onerror="this.style.display='none'" src="logo.png"/>
<div class="wm-text">YIEZHII内部通用版</div>
</div>
<div class="app-container" id="app">
<aside class="sidebar">
<div class="control-panel" id="modePanel" style="padding:12px;">
<div style="display:flex; gap:10px;">
<button class="btn btn-secondary" id="modeClassicBtn" onclick="setAppMode('classic')" style="flex:1">🎲 原始生成</button>
<button class="btn btn-secondary" id="modeKnowledgeBtn" onclick="setAppMode('knowledge')" style="flex:1">🧠 知识模版生成</button>
</div>
</div>

<div class="control-panel">
<div class="tabs">
<button class="tab-btn active" onclick="switchTab('content')">📝 内容</button>
<button class="tab-btn" onclick="switchTab('style')">🎨 风格</button>
<button class="tab-btn" onclick="switchTab('details')">🛠️ 微调</button>
</div>
<div class="panel-content active" id="tab-content">
<div class="control-group">
<div class="group-title">标题内容</div>
<input id="titleInput" oninput="syncTitle()" style="margin-bottom:5px;" type="text" value="四季青热门大码档口分享"/>
<label style="font-size:12px;"><input checked="" id="breakTitleCheck" onchange="syncTitle()" type="checkbox"/> 自动换行</label>
</div>
<div class="control-group">
<div class="group-title">数据管理</div>
<div style="display:flex; gap:10px; margin-bottom:10px;">
<button class="btn btn-secondary" onclick="openDataManager()" style="flex:1">📂 管理数据</button>
<button class="btn btn-secondary" onclick="document.getElementById('impArea').style.display='block'" style="flex:1">📋 导入</button>
</div>
<div id="impArea" style="display:none;">
<textarea id="importText" placeholder="粘贴内容..." style="height:60px;"></textarea>
<button class="btn btn-primary" onclick="importData()" style="margin-top:5px; padding:5px;">确认导入</button>
</div>
</div>
</div>
<div class="panel-content" id="tab-style">
<div class="control-group">
<div class="group-title">点击选择风格</div>
<div class="visual-selector">
<div class="visual-opt active" onclick="setPaperStyle('default', this)"><div class="visual-preview" style="background:#FDFBF7"></div><div class="visual-label">极简</div></div>
<div class="visual-opt" onclick="setPaperStyle('xhs-note', this)"><div class="visual-preview vp-xhs-note"></div><div class="visual-label">小红书暖光</div></div>

<div class="visual-opt" onclick="setPaperStyle('lined', this)"><div class="visual-preview vp-lined"></div><div class="visual-label">横线</div></div>
<div class="visual-opt" onclick="setPaperStyle('phone', this)"><div class="visual-preview" style="background:#f7f7f7; border-top:5px solid #eee;"></div><div class="visual-label">备忘录</div></div>
<div class="visual-opt" onclick="setPaperStyle('yellow', this)"><div class="visual-preview" style="background:#FFD954"></div><div class="visual-label">便签</div></div>
<div class="visual-opt" onclick="setPaperStyle('grid-browser', this)"><div class="visual-preview vp-grid"></div><div class="visual-label">网格</div></div>
<div class="visual-opt" onclick="setPaperStyle('gold', this)"><div class="visual-preview vp-gold"></div><div class="visual-label">金色</div></div>
<div class="visual-opt" onclick="setPaperStyle('macos', this)"><div class="visual-preview vp-mac"></div><div class="visual-label">Mac</div></div>
<div class="visual-opt" onclick="setPaperStyle('yellow-app', this)"><div class="visual-preview" style="background:#FDFCF6; border-top:3px solid orange;"></div><div class="visual-label">APP</div></div>
<div class="visual-opt" onclick="setPaperStyle('rounded', this)"><div class="visual-preview" style="background:#ccc; padding:3px;"><div style="background:#fff; height:100%"></div></div><div class="visual-label">圆角</div></div>
<div class="visual-opt" onclick="setPaperStyle('mac-grid', this)"><div class="visual-preview" style="background:#fff; border-top:8px solid #eee;"></div><div class="visual-label">Mac网</div></div>
<div class="visual-opt" onclick="setPaperStyle('texture', this)"><div class="visual-preview" style="background:#f0f0f0;"></div><div class="visual-label">纹理</div></div>
<div class="visual-opt" onclick="setPaperStyle('draft-grid', this)"><div class="visual-preview vp-grid"></div><div class="visual-label">工程</div></div>
<div class="visual-opt" onclick="setPaperStyle('yellow-bar', this)"><div class="visual-preview" style="background:#fff; border-top:10px solid #F8D868"></div><div class="visual-label">黄栏</div></div>
<div class="visual-opt" onclick="setPaperStyle('yellow-lite', this)"><div class="visual-preview" style="background:#fff; border-left:3px solid #E6B800"></div><div class="visual-label">极简黄</div></div>
<div class="visual-opt" onclick="setPaperStyle('bottom-line', this)"><div class="visual-preview" style="background:#fff; border-bottom:3px solid #E0C090"></div><div class="visual-label">底线</div></div>
<div class="visual-opt" onclick="setPaperStyle('date-lined', this)"><div class="visual-preview vp-lined"></div><div class="visual-label">日期</div></div>
<div class="visual-opt" onclick="setPaperStyle('dashed', this)"><div class="visual-preview" style="border-bottom:1px dashed #ccc; background:#f9f9f9"></div><div class="visual-label">虚线</div></div>
<div class="visual-opt" onclick="setPaperStyle('spiral', this)"><div class="visual-preview" style="background:#fcf9f2; border-left:5px double #ccc;"></div><div class="visual-label">螺旋</div></div>
<div class="visual-opt" onclick="setPaperStyle('minimal', this)"><div class="visual-preview" style="background:#fff;"></div><div class="visual-label">极简2</div></div>
</div>
</div>
<div class="control-group">
<div class="group-title">主题配色</div>
<div class="color-dots">
<div class="color-dot active" onclick="setTheme(0)" style="background:#FDFBF7"></div>
<div class="color-dot" onclick="setTheme(1)" style="background:#F0F4F8"></div>
<div class="color-dot" onclick="setTheme(2)" style="background:#F1F5EB"></div>
<div class="color-dot" onclick="setTheme(3)" style="background:#F6F0F8"></div>
<div class="color-dot" onclick="setTheme(4)" style="background:#FFFFFF; border:1px solid #ddd;"></div>
<div class="color-dot" onclick="setTheme(5)" style="background:#333"></div>
<div class="color-dot" onclick="setTheme(6)" title="雾蓝晨光" style="background:#EEF2F6; border:1px solid #d7e3ef;"></div>
</div>
</div>
</div>
<div class="panel-content" id="tab-details">
<div class="control-group">
<div class="group-title">排版对齐</div>
<div class="segmented align-segmented">
<button class="btn btn-secondary align-btn is-active" onclick="updateCSSVar('--title-align', 'left'); setAlignActive(this)">⬅️ 左</button>
<button class="btn btn-secondary align-btn" onclick="updateCSSVar('--title-align', 'center'); setAlignActive(this)">⬇️ 中</button>
<button class="btn btn-secondary align-btn" onclick="updateCSSVar('--title-align', 'right'); setAlignActive(this)">➡️ 右</button>
</div>
<div class="input-row">
<span style="font-size:12px;">序号:</span>
<select id="indexStyleSelect" onchange="renderCurrentData()" style="flex:1">
<option value="circle">空心圆 (①)</option>
<option value="solid">实心黑 (❶)</option>
<option value="pad">补零 (01)</option>
<option value="badge">胶囊 (■)</option>
<option value="dot">简约 (1.)</option>
</select>
</div>
</div>
<div class="control-group">
<div class="group-title">尺寸滑块</div>
<div class="slider-stack">
<div class="slider-row"><span class="slider-label">标题字号</span><input class="slider" max="50" min="20" oninput="updateCSSVar('--title-size', this.value + 'px'); document.getElementById('titleSizeVal').textContent=this.value+'px';" type="range" value="32"/><span class="slider-val" id="titleSizeVal">32px</span></div>
<div class="slider-row"><span class="slider-label">正文字号</span><input class="slider" max="18" min="12" oninput="updateCSSVar('--list-size', this.value + 'px'); document.getElementById('listSizeVal').textContent=this.value+'px';" type="range" value="14"/><span class="slider-val" id="listSizeVal">14px</span></div>
<div class="slider-row"><span class="slider-label">行间距</span><input class="slider" id="gapSlider" max="40" min="5" oninput="updateCSSVar('--list-gap', this.value + 'px'); document.getElementById('gapVal').textContent=this.value+'px';" type="range" value="12"/><span class="slider-val" id="gapVal">12px</span></div>
<div id="gapInfo" style="display:none; text-align:right; font-size:10px; color:#ff2442;">(网格/横线类：控制行高；其他风格：控制段落行距)</div>
</div>
</div>
<div class="control-group">
<div class="group-title">装饰贴纸</div>
<div class="sticker-grid">
<button class="btn btn-secondary sticker-main" onclick="document.getElementById('logoUpload').click()">➕ Logo</button>
<input hidden="" id="logoUpload" onchange="addLogo(this)" type="file"/>

<button class="btn sticker-main" onclick="applyPremiumMode()">✨ 高级感模式</button>
<button class="btn btn-secondary sticker-main" onclick="undoLast()" id="undoBtn">↩ 撤销</button>
<button class="btn btn-secondary sticker-btn-item" onclick="addDecorSticker('glow')">✨ 奶油光斑</button>
<button class="btn btn-secondary sticker-btn-item" onclick="addDecorSticker('tape')">🧷 胶带贴</button>
</div>
</div>
</div>
</div>

<div class="control-panel" id="knowledgePanel" style="display:none;">
<div style="padding:16px;">
<div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
<div style="font-weight:900;">🧠 知识模版生成</div>
<span style="font-size:12px; color:#ff2442; background:rgba(255,36,66,0.08); padding:3px 8px; border-radius:999px; font-weight:700;">NEW</span>
</div>
<textarea id="knowledgeText" placeholder="粘贴知识文案（含标题/副标题/Step结构）..." style="width:100%; height:160px; padding:10px; border:1px solid #eee; border-radius:10px; font-size:13px; line-height:1.5; resize:vertical;"></textarea>
<div style="display:flex; gap:10px; margin-top:10px;">
<button class="btn btn-primary" onclick="knowledgeFillExample()" style="flex:1">📋 示例</button>
<button class="btn btn-primary" onclick="knowledgeGenerate()" style="flex:1">🧾 一键排版</button>
</div>
<div style="display:flex; gap:10px; margin-top:10px;">
<button class="btn btn-secondary" onclick="knowledgeDownload()" style="flex:1">⬇️ 下载知识图片</button>
<button class="btn btn-secondary" onclick="knowledgeClear()" style="flex:1">🧹 清空</button>
</div>
<div style="margin-top:12px;">
<div style="display:flex; justify-content:space-between; align-items:center;">
<div style="font-weight:800;">排版字号</div>
<div style="font-size:12px; color:#666;"><span id="knowledgeScaleLabel">100%</span> | 页数：<span id="knowledgePageCount">0</span></div>
</div>
<input id="knowledgeScale" max="120" min="80" oninput="knowledgeUpdateScale()" style="width:100%; margin-top:8px;" type="range" value="100"/>
<div style="font-size:12px; color:#888; margin-top:6px;">提示：字号越小越能减少分页；字号越大更醒目但可能分页更多。</div>
</div>
</div>
</div>
<div style="margin-top:20px; background:#fff; padding:15px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.05);">
<button class="btn btn-primary" onclick="generateNewData()">🎲 随机生成</button>
<div style="display:flex; gap:10px; margin-top:10px;">
<button class="btn btn-secondary" onclick="downloadImages()" style="flex:1">⬇️ 下载</button>
<button class="btn btn-secondary" onclick="document.getElementById('bgUpload').click()" style="flex:1">🖼️ 换图</button>
<input hidden="" id="bgUpload" onchange="changeBg(this)" type="file"/>
</div>
</div>
</aside>
<main class="main-preview"><div id="classicPreview" style="display:flex; flex-wrap:wrap; gap:40px; justify-content:center;"><div class="xhs-card" id="card1">
<div class="custom-bg-overlay"></div>
<div class="inner-sheet-wrapper">
<div class="paper-macos-bar" style="display:none;"></div>
<div class="mac-grid-tools" style="display:none;"><div class="mac-tool-icon"></div><div class="mac-tool-icon"></div></div>
<div class="card-header">
<h1 class="main-title" contenteditable="true">标题</h1>
<div class="header-icons" style="display:none;"><span class="icon-star">★</span> <span class="icon-bubble"></span></div>
</div>
<div class="card-content" id="list1"></div>
<div class="paper-yellow-app-footer" style="display:none;"><div class="icon-mock"></div> <div class="icon-mock icon-circle"></div> <div class="icon-mock"></div> <div class="icon-mock"></div></div>
<div class="paper-texture-footer" style="display:none;"><div class="icon-gray icon-bell"></div> <div class="icon-gray"></div> <div class="icon-gray"></div></div>
<div class="paper-grid-browser-footer" style="display:none;"><span>BIAOTI</span> <span>MOBAN</span></div>
<div class="paper-gold-footer" style="display:none;"><div class="building-roof"></div><div class="building-body"></div></div>
<div class="paper-bottom-line-footer" style="display:none;"></div>
</div>
</div><div class="xhs-card" id="card2">
<div class="custom-bg-overlay"></div>
<div class="inner-sheet-wrapper">
<div class="paper-macos-bar" style="display:none;"></div>
<div class="mac-grid-tools" style="display:none;"><div class="mac-tool-icon"></div><div class="mac-tool-icon"></div></div>
<div class="card-header">
<h1 class="main-title" contenteditable="true">标题</h1>
<div class="header-icons" style="display:none;"><span class="icon-star">★</span> <span class="icon-bubble"></span></div>
</div>
<div class="card-content" id="list2"></div>
<div class="paper-yellow-app-footer" style="display:none;"><div class="icon-mock"></div> <div class="icon-mock icon-circle"></div> <div class="icon-mock"></div> <div class="icon-mock"></div></div>
<div class="paper-texture-footer" style="display:none;"><div class="icon-gray icon-bell"></div> <div class="icon-gray"></div> <div class="icon-gray"></div></div>
<div class="paper-grid-browser-footer" style="display:none;"><span>BIAOTI</span> <span>MOBAN</span></div>
<div class="paper-gold-footer" style="display:none;"><div class="building-roof"></div><div class="building-body"></div></div>
<div class="paper-bottom-line-footer" style="display:none;"></div>
</div>
</div></div><div id="knowledgePreview" style="display:none; display:flex; flex-wrap:wrap; gap:40px; justify-content:center;"></div></main>
</div>
<div class="modal-overlay" id="dataManagerModal">
<div class="modal-content">
<h3>数据管理 <button onclick="closeDataManager()" style="float:right; border:none; background:none; cursor:pointer; font-size:16px;">✕</button></h3>
<div class="data-list" id="dataList"></div>
<button class="btn btn-secondary" onclick="resetData()" style="color:red;">重置所有数据</button>
</div>
</div>


<script src="data.js"></script>
<script src="app.js"></script>
</body>
</html>
